# Arithmetic Calculator

Ένα πρόγραμμα σε java το οποίο επιλύει οποιαδήποτε σύνθετη αριθμητική έκφραση η οποία
μπορεί να περιέχει
1. Παρενθέσεις: δηλώνουν την προτεραιότητα των πράξεων.
2. Τα σύμβολα των πράξεων (τελεστές):
- \+ ( πρόσθεση ), (π.χ. 3.3+2.2)
- \- ( αφαίρεση ), (π.χ. 3.3-2.2)
- \* ( πολλαπλασιασμός ), (π.χ. 3.3*2.2)
- / ( διαίρεση ), (π.χ. 3.3/2.2)
- ^ ( ύψωση σε δύναμη ), (π.χ. 3.3^2.2)
3. Θετικούς αριθμούς (ακέραιους ή κινητής υποδιαστολής): Όλοι οι υπολογισμοί γίνονται
μεταξύ αριθμών κινητής υποδιαστολής.
4. Κενούς χαρακτήρες ( [ \t\n\r] ) μεταξύ παρενθέσεων, τελεστών και αριθμών.
Η κατάταξη των τελεστών από την υψηλότερη προς την χαμηλότερη προτεραιότητα δίνεται
παρακάτω. Εκφράσεις που περιέχονται μέσα σε παρενθέσεις έχουν προτεραιότητα έναντι
οποιουδήποτε τελεστή.
>^(υψηλή) /(μέση+) *x(μέση-) -(χαμηλή+) +(χαμηλή-)

Παράδειγμα αριθμητικής έκφρασης είναι η παρακάτω:

>5 + (((3.3 + 6.6) * 9.2 ) + 12.546) * 2.323 +
( ( ( 33.3 + 2342.1 ) * 55.555 ) - 10000.009 ) + 11.334 * 2.3 ^3.5

Προκειμένου να επιλυθεί το πρόβλημα δημιουργείται το ισοδύναμο δυαδικό δένδρο
υπολογισμού της έκφρασης (παράδειγμα δίνεται σε επόμενη σελίδα). Οι κανόνες που
διέπουν το δένδρο είναι οι εξής:
- Για κάθε αριθμητική έκφραση, αναζητούνται όλοι οι τελεστές που βρίσκονται εκτός
παρενθέσεων. Επιλέγουμε έναν από τους διαθέσιμους τελεστές με τη χαμηλότερη διαθέσιμη
προτεραιότητα . Σπάμε την αριθμητική έκφραση σε δύο υπο-αριθμητικές εκφράσεις (αριστερή
και δεξιά) οι οποίες ενώνονται με τον τελεστή.
- Όταν συναντούμε παρενθέσεις, τις αφαιρέσουμε και αναλύσουμε την
έκφραση εντός των παρενθέσεων. Η αφαίρεση των παρενθέσεων γίνεται αφού
προηγουμένως έχουμε εξετάσει όλους τους αριθμητικούς τελεστές εκτός παρενθέσεων.
- Η διαδικασία επαναλαμβάνεται αναδρομικά έως ότου όλες οι υπο-εκφράσεις καταλήγουν να
περιέχουν μόνο αριθμούς. Στην περίπτωση που σε μία έκφραση ο πρώτος και ο τελευταίος
χαρακτήρας είναι παρενθέσεις άνοιγμα ‘(‘ και κλείσιμο ‘)’ παρένθεσης, αφαιρούμε τις
παρενθέσεις πριν προχωρήσουμε περαιτέρω στην ανάλυση της έκφρασης.

Το πρόγραμμα διαβάζει μία αριθμητική έκφραση από το πληκτρολόγιο. Για την αριθμητική
έκφραση που διαβάζει

- A. Ελέγχει ότι πρόκειται για σωστά δομημένη αριθμητική έκφραση. Συγκεκριμένα ελέγχει ότι στην έκφραση
  1. κλείνουν όλες οι παρενθέσεις που έχουν ανοίξει προηγουμένως
  2. δεν υπάρχουν σύμβολα κλεισίματος παρένθεσης ‘)’ χωρίς να προηγείται σύμβολο
ανοίγματος της παρένθεσης.
  3. δεν περιέχονται άλλοι χαρακτήρες εκτός από αριθμοί (σταθερής και κινητής
υποδιαστολής) χαρακτήρες (whitespace), παρενθέσεις και οι τελεστές ( +,-,/,*,x,^ ). H
υποστιαστολή σημειώνεται με την τελεία ‘.’ .

- B. δημιουργεί το ισοδύναμο δυαδικό δένδρο που αντιστοιχεί στη δοθείσα αριθμητική
έκφραση. Η κλάση του δένδρου περιέχει τις εξής μεθόδους:
  1. toDotString: επιστρέφει ένα αλφαριθμητικό που αντιστοιχεί στο
καστασκευασμένο δένδρο. Το αλφαριθμητικό αυτό στη συνέχεια, μπορεί να
χρησιμοποιηθεί από το πρόγραμμα dot/graphviz προκειμένου να εκτυπώσει το
διάγραμμα του δένδρου σε μορφή PNG, SVG ή άλλη.
  2. toString: καλούμενη από τη ρίζα του δένδρου επιστρέφει ένα αλφαριθμητικό που
περιέχει την ίδια ή μία ισοδύναμη αριθμητική έκφραση με αυτή που αντιστοιχεί στην
αρχική δοθείσα έκφραση. Το αλφαριθμητικό που προκύπτει από την μέθοδο toString() μπορεί να
διαφέρει από το αρχικά δοθέν αλφαριθμητικό, αλλά είναι αριθμητικά
ισοδύναμα.
  3. calculate: Υπολογίζει την αριθμητική τιμή της έκφρασης που αντιστοιχεί στο
υποδένδρο αυτό. Καλούμενη από την ρίζα του δένδρου επιστρέφει την ισοδύναμη
αριθμητική τιμή (αποτέλεσμα) της αρχικής αριθμητικής έκφρασης.
